<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Pool serveurs</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <!-- Banner -->
  <div class="banner">
    <div class="brand">
      <img src="/static/bnp_logo.png" alt="BNP Paribas" />
      <span>Pool serveurs</span>
    </div>

    <!-- Toolbar: search + per page + buttons -->
    <form class="toolbar" method="get" action="/pool_servers">
      <input
        type="text"
        name="q"
        placeholder="Rechercher (serial, équipement, zone, …)"
        value="{{ q or '' }}"
      />

      <label class="per-page">
        Par page
        <select name="per_page">
          <option value="10"  {% if per_page == 10  %}selected{% endif %}>10</option>
          <option value="20"  {% if per_page == 20  %}selected{% endif %}>20</option>
          <option value="50"  {% if per_page == 50  %}selected{% endif %}>50</option>
          <option value="100" {% if per_page == 100 %}selected{% endif %}>100</option>
        </select>
      </label>

      <button type="submit" class="btn primary">Chercher</button>
      <a href="/" class="btn">Accueil</a>

      <!-- Preserve current page when you change per_page or search -->
      <input type="hidden" name="page" value="{{ page }}" />
    </form>
  </div>

  <!-- Card -->
  <div class="card">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Equipment name</th>
          <th>Serial number</th>
          <th>Serial chassis</th>
          <th>Date add</th>
          <th>T Catalog Server ID</th>
          <th>T Asset Report ID</th>
          <th>Region</th>
          <th>T Site ID</th>
          <th>Priority</th>
          <th>CFI code</th>
          <th>Physical zone target</th>
          <th>NIC count</th>

          <th>Heartbeat</th>
          <th>SAN</th>
          <th>BMC</th>
          <th>BMC last check inc</th>
          <th>BMC date</th>
          <th>BMC MAC</th>

          <th>Discovering</th>
          <th>Discovering state</th>
          <th>Discovering date</th>
          <th>Discovering inc</th>

          <th>MYNET</th>
          <th>MYNET state</th>
          <th>MYNET date</th>
          <th>MYNET inc</th>

          <th>Qualif</th>
          <th>Qualif state</th>
          <th>Qualif date</th>
          <th>T Qualif ID</th>

          <th>Business unit</th>
          <th>AP code authorized</th>
          <th>Maintenance</th>
          <th>Maintenance comments</th>
          <th>Maintenance date</th>

          <th>MKP subscription id</th>
          <th>MKP owner</th>
          <th>MKP track id</th>
          <th>MKP server allocated</th>
          <th>MKP allocation date</th>
          <th>MKP ecosystem</th>
          <th>MKP hostname</th>
          <th>MKP workspace id</th>
          <th>MKP deployment id</th>
          <th>MKP product name</th>
          <th>MKP product version</th>
          <th>MKP component name</th>
          <th>MKP component version</th>
          <th>MKP product name final</th>
          <th>MKP env</th>

          <th>State (int)</th>
          <th>State (string)</th>
          <th>supchain subscription id</th>
          <th>bmaas subscription id</th>
          <th>SOKI</th>
          <th>BMC state</th>
          <th>MYNET last check inc</th>
          <th>MYNET subscription id</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td>{{ r[0] }}</td>
          <td>{{ r[1] }}</td>
          <td>{{ r[2] }}</td>
          <td>{{ r[3] or '—' }}</td>
          <td>{{ r[4] }}</td>
          <td>{{ r[5] }}</td>
          <td>{{ r[6] }}</td>
          <td>{{ r[7] }}</td>
          <td>{{ r[8] }}</td>
          <td>{{ r[9] }}</td>
          <td>{{ r[10] }}</td>
          <td>{{ r[11] }}</td>
          <td>{{ r[12] }}</td>

          <td><span class="badge {% if r[13] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[13] else 'Non' }}</span></td>
          <td><span class="badge {% if r[14] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[14] else 'Non' }}</span></td>
          <td><span class="badge {% if r[15] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[15] else 'Non' }}</span></td>
          <td>{{ r[16] or '—' }}</td>
          <td>{{ r[17] or '—' }}</td>
          <td>{{ r[18] or '—' }}</td>

          <td><span class="badge {% if r[19] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[19] else 'Non' }}</span></td>
          <td>{{ r[20] or '—' }}</td>
          <td>{{ r[21] or '—' }}</td>
          <td>{{ r[22] or '—' }}</td>

          <td><span class="badge {% if r[23] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[23] else 'Non' }}</span></td>
          <td>{{ r[24] or '—' }}</td>
          <td>{{ r[25] or '—' }}</td>
          <td>{{ r[26] or '—' }}</td>

          <td><span class="badge {% if r[27] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[27] else 'Non' }}</span></td>
          <td>{{ r[28] or '—' }}</td>
          <td>{{ r[29] or '—' }}</td>
          <td>{{ r[30] or '—' }}</td>

          <td>{{ r[31] or '—' }}</td>
          <td>{{ r[32] or '—' }}</td>
          <td><span class="badge {% if r[33] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[33] else 'Non' }}</span></td>
          <td>{{ r[34] or '—' }}</td>
          <td>{{ r[35] or '—' }}</td>

          <td>{{ r[36] or '—' }}</td>
          <td>{{ r[37] or '—' }}</td>
          <td>{{ r[38] or '—' }}</td>
          <td><span class="badge {% if r[39] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[39] else 'Non' }}</span></td>
          <td>{{ r[40] or '—' }}</td>
          <td>{{ r[41] or '—' }}</td>
          <td>{{ r[42] or '—' }}</td>
          <td>{{ r[43] or '—' }}</td>
          <td>{{ r[44] or '—' }}</td>
          <td>{{ r[45] or '—' }}</td>
          <td>{{ r[46] or '—' }}</td>
          <td>{{ r[47] or '—' }}</td>
          <td>{{ r[48] or '—' }}</td>

          <td>{{ r[49] or '—' }}</td>
          <td>{{ r[50] or '—' }}</td>
          <td>{{ r[51] or '—' }}</td>
          <td>{{ r[52] or '—' }}</td>
          <td><span class="badge {% if r[53] %}ok{% else %}ko{% endif %}">{{ 'Oui' if r[53] else 'Non' }}</span></td>
          <td>{{ r[54] or '—' }}</td>
          <td>{{ r[55] or '—' }}</td>
          <td>{{ r[56] or '—' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="table-footer">
      <div>Total: {{ total }}</div>
      <div class="pager">
        {% if page > 1 %}
          <a class="btn" href="/pool_servers?page={{ page - 1 }}&per_page={{ per_page }}&q={{ q or '' }}">Précédent</a>
        {% endif %}
        <span>Page {{ page }}</span>
        {% if (page * per_page) < total %}
          <a class="btn" href="/pool_servers?page={{ page + 1 }}&per_page={{ per_page }}&q={{ q or '' }}">Suivant</a>
        {% endif %}
      </div>
    </div>
  </div>
</body>
</html>
